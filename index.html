<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Piano Hero - 音乐游戏</title>
        
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">

        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>

        <!-- polyfill -->
        <script src="inc/shim/Base64.js" type="text/javascript"></script>
        <script src="inc/shim/Base64binary.js" type="text/javascript"></script>
        <script src="inc/shim/WebAudioAPI.js" type="text/javascript"></script>

        <!-- midi.js package -->
        <script src="js/midi/audioDetect.js" type="text/javascript"></script>
        <script src="js/midi/gm.js" type="text/javascript"></script>
        <script src="js/midi/loader.js" type="text/javascript"></script>
        <script src="js/midi/plugin.audiotag.js" type="text/javascript"></script>
        <script src="js/midi/plugin.webaudio.js" type="text/javascript"></script>
        <script src="js/midi/plugin.webmidi.js" type="text/javascript"></script>

        <!-- utils -->
        <script src="js/util/dom_request_xhr.js" type="text/javascript"></script>
        <script src="js/util/dom_request_script.js" type="text/javascript"></script>

        <!-- jasmid -->
        <script src="inc/jasmid/stream.js"></script>
        <script src="inc/jasmid/midifile.js"></script>
        <script src="inc/jasmid/replayer.js"></script>
        <script src="inc/jasmid/synth.js"></script>
        <script src="inc/jasmid/audio.js"></script>

        <script src='songs.js'></script>
    </head>

    <body class="noBorder">
        <div class="particles" id="particles"></div>
        
        <div class="game-title">
            <h1>Piano Hero</h1>
            <div class="game-description">
                踏上音乐冒险之旅，在钢琴键盘上展现你的才华！
                选择你喜欢的歌曲，跟随节奏，创造美妙的音乐。
            </div>
        </div>

        <div id='menuContainer'>
            <div class="carousel-container">
                <div class="carousel">
                    <div class="carousel-item" onclick="selectSong(0)">
                        <img src='img/south-park.png' alt="South Park"/>
                    </div>
                    <div class="carousel-item" onclick="selectSong(1)">
                        <img src='img/the-simpsons.png' alt="The Simpsons"/>
                    </div>
                    <div class="carousel-item" onclick="selectSong(2)">
                        <img src='img/传奇.png' alt="传奇"/>
                    </div>
                    <div class="carousel-item" onclick="selectSong(3)">
                        <img src='img/盗将行.png' alt="盗将行"/>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button type="button" class="prev" onclick="rotateCarouselPrev()">上一首</button>
            <button type="button" class="next" onclick="rotateCarouselNext()">下一首</button>
        </div>

        <div class="gameContainer" id="gameContainer">
            <canvas class="gamePianotitle" id="gameCanvas" onclick="gameMouseClick(event)"></canvas>
            <img src="img/replay.png" id="replay" class="replay">
            <img src="img/music.png" id="music" class="music">
        </div>

        <script src='game.js'></script>
        <script src='music.js'></script>
        <script>
            // 确保 Zepto 已加载
            if (typeof $ === 'undefined') {
                console.error('Zepto not loaded!');
            } else {
                console.log('Zepto loaded successfully');
            }
        </script>
        <script src='js/carousel.js'></script>
        <script>
            // 检查 carousel.js 是否正确加载和执行
            $(document).ready(function() {
                console.log('Document ready');
                
                // 直接绑定点击事件
                $('.prev').click(function() {
                    console.log('Previous button clicked directly');
                });
                
                $('.next').click(function() {
                    console.log('Next button clicked directly');
                });
            });
        </script>
    </body>
</html>